<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>19 指令</title>
  <script src="../js/vue.js"></script>
</head>

<body>
  <div id="app">
    <!-- 调用指令，必须加 v- 前缀 -->
    <p v-color="'blue'">我是一个P标签，这是一行测试文字...</p>
    <input type="text" v-focus>
  </div>


  <script>
    // 自定义全局指令，名称为 color
    // 其中：参数1 ：指令的名称，注意 在定义时，指令的名称前面不需要加 v- 前缀
    // 但是：在调用时，必须在指令前面加上 v- 前缀进行调用
    // 参数2 ：一个对象，在这个对象上面，有一些指令相关的函数，可以在特定的阶段，执行相关的操作
    Vue.directive('color', {
      bind: function (el, binding) {  // 每当指令绑定到元素上时，会立即执行 bind 函数，只执行一次
        // 注意：在每一个函数中，第一个参数，永远是 el ，表示被绑定了指令的那个元素，这个 el 参数，是一个原生的JS对象
        // 在元素刚绑定了指令的时候，还没有插入到 DOM 中去，这时候，调用 focus 方法没有作用
        // 因为，一个元素，只有插入到DOM之后，才能获取焦点

        // 和样式相关的操作，一般都在 bind 中执行

        // console.log(binding.value)
        // console.log(binding.expression)

        el.style.color = binding.value
      },
      inserted: function(el) {

      },
      updated: function(el) {

      }
    })


    var vm = new Vue({
      el: '#app',
      data: {

      },
      methods: {

      },

      // 自定义私有指令，名称为 focus
      directives: {
        'focus': {
          bind: function (el) {

          },
          inserted: function (el) {
            // 和JS行为有关的操作，最好在 inserted 中去执行
            el.focus();
            console.log(el);
          },
          updated: function (el) {

          }
        }
      }
    })

  </script>

</body>

</html>